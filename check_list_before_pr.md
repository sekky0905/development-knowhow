# Pull-RequestでReviewを依頼する前に確認すること

## 動作系

- 状態の変更を行なっても大丈夫か
    - トランザクション的な問題はないか
    - 他の実装部分との整合性は取れているか
- インフラ的リソースや外部接続のことは考えているか
    - コネクション数やクオータ制限を考えているか

## 進め方系

- Pull/Requestは、粒度が適切か
    - 1つの事柄に絞っているか
    - reviewerがreviewしにくくないか
    - 同じ機能内でも意味的に更に分割することはできないか
- リリースの順番それで大丈夫か
    - 運用時の事故は起きないか

## 綺麗に書く系

- 言い回し、命名が本当にそれで良いのか確認したか
    - 確認対象
        - 変数名、関数名、構造体/クラス名、package名
        - コメントの言い回し
        - コード内の文章
    - 名前を見てコードの意味がわかるか
    - 実態と乖離がないか
        - 特にリファクタリング等のコードの変更の後に
    - 簡潔か
    - もっと適切な言い回し、命名はないか
    - 英語はあっているか
    - Info等汎用すぎる言い回しになっていないか
    - 他の箇所と言い回しや書き方はあっているか
    
### 関数

- 関数やメソッドは、内部実装を全て認識しないとうまく使えないものになっていないか
- 関数やメソッドでデータの受け渡し方法に統一感はあるか
    - 例えば、あるデータはデータの整形を終えた状態で受け渡す前提で、またあるデータはその関数内でデータの整形を行う必要があるなど


## 設計系
- 仕様を調整すれば実装がもっとシンプルになったり、実装コストが下がらないか
    - 初めから決めた仕様や設計で実装を複雑なものにしていないか
- 抽象化は適切か
- 依存関係は適切か
- 結合度は適切か
- 責務は適切か
    - そのコードは、本当にそのレイヤー良いか
    - 関数、構造体/クラスの責務は1つになっているか
        - 余計なコードを含んでいないか
- 引数は多くなりすぎていないか
- 戻り値は多くなりすぎていないか
- 早すぎる最適化、共通化ではないか

## テスト系

- テストに網羅性はあるか
- テストで使用するデータの値は後のコードの変更時にミスを検知できるものか
    - 例えばプロダクションコードに定義された定数とかをテストで使用してしまうと、その定数を誤って変更してしまった際に、その変更を検知できなくなる
        - テストでベタ書きをしていれば、定数を誤った形で変更してしまっても既存のテストがこけるはずなので、ベタ書きの方が好ましい
    - テストで変更時の既存の仕様を守る
- 実際の利用に即したテストを書いているか
    - 実際の利用とかけ離れた、ただテストを書いたという免罪符のためのコードになっていないか
    
## Git部分
- commitの粒度は正しいか
    - 後でreviewerや自分で見たときに、そのcommitで何が行われたか分かるか
    - 作業ログではなく、実現したこと単位でのcommitになっているか
- commitのmessageは妥当か
    - 作業の内容だけではなく、理由も記載しているか
        - commitログも資産なので、後で見てわかるように正しく丁寧に
    - commitのmessageとcommitの内容に齟齬はないか

## 見直し系

- 実際に動作確認は行なったか
- コードが仕様を満たしているか
    - 起こり得る全パターンで仕様を満たしているか
- パターンの洗い出しは、完全か
    - パターンに抜け漏れはないか
    - エラーハンドリングは完全か
    - ランタイムエラーは生じないか
- コードの全部になぜそうなったか理由が言えるか
    - なんとなく実装していないか
    - 複数の実装案を検討したか
        - 各々の場合のpros/consを検討したか
        - 複数案の中から明確な基準を持ってその実装を選んだか
        - 実装に迷った箇所はないか
            - reviewerに事前に相談したか
- そのコードは本当に必要か
    - オーバスペックじゃないか
    - 現時点で不要なものではないか
        - 未確定の将来のためだけのコードはないか
        - YAGNIか
    - 必要以上に仰々しい実装になっていないか
- 言語仕様や慣習的に正しい実装か
    - 公式ドキュメントで確認したか
- typoはないか
- 批判的、客観的、懐疑的にセルフレビューしたか

    
